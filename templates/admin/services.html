{% extends 'admin/base.html' %} {% block title %}Services{% endblock %} {% block
content %}
<div class="page-header d-flex justify-content-between align-items-center">
  <div>
    <h1>Services</h1>
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a href="{{ url_for('admin.dashboard') }}">Dashboard</a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">Services</li>
      </ol>
    </nav>
  </div>
  <a href="{{ url_for('admin.new_service') }}" class="btn btn-primary">
    <i class="fas fa-plus"></i> Add New Service
  </a>
</div>

{% with messages = get_flashed_messages(with_categories=true) %} {% if messages
%} {% for category, message in messages %}
<div
  class="alert alert-{{ category }} alert-dismissible fade show"
  role="alert"
>
  {{ message }}
  <button
    type="button"
    class="btn-close"
    data-bs-dismiss="alert"
    aria-label="Close"
  ></button>
</div>
{% endfor %} {% endif %} {% endwith %}

<div class="card">
  <div class="card-header">
    <h6>Manage Services</h6>
  </div>
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-bordered datatable">
        <thead>
          <tr>
            <th>Icon</th>
            <th>Title</th>
            <th>Short Description</th>
            <th>Featured</th>
            <th>Order</th>
            <th width="150">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% if services %} {% for service in services %}
          <tr>
            <td>
              <i class="{{ service.icon }} fa-2x"></i>
            </td>
            <td>{{ service.title }}</td>
            <td>{{ service.short_description|truncate(50) }}</td>
            <td>
              {% if service.is_featured %}
              <span class="badge bg-success">Featured</span>
              {% else %}
              <span class="badge bg-secondary">No</span>
              {% endif %}
            </td>
            <td>{{ service.order }}</td>
            <td class="table-actions">
              <a
                href="{{ url_for('admin.edit_service', service_id=service.id) }}"
                class="btn btn-sm btn-info"
              >
                <i class="fas fa-edit"></i> Edit
              </a>
              <button
                type="button"
                class="btn btn-sm btn-danger"
                data-bs-toggle="modal"
                data-bs-target="#deleteModal{{ service.id }}"
              >
                <i class="fas fa-trash"></i> Delete
              </button>

              <!-- Delete Modal -->
              <div
                class="modal fade"
                id="deleteModal{{ service.id }}"
                tabindex="-1"
                aria-labelledby="deleteModalLabel{{ service.id }}"
                aria-hidden="true"
              >
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5
                        class="modal-title"
                        id="deleteModalLabel{{ service.id }}"
                      >
                        Confirm Delete
                      </h5>
                      <button
                        type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close"
                      ></button>
                    </div>
                    <div class="modal-body">
                      Are you sure you want to delete the service
                      <strong>{{ service.title }}</strong>? This action cannot
                      be undone.
                    </div>
                    <div class="modal-footer">
                      <button
                        type="button"
                        class="btn btn-secondary"
                        data-bs-dismiss="modal"
                      >
                        Cancel
                      </button>
                      <form
                        action="{{ url_for('admin.delete_service', service_id=service.id) }}"
                        method="POST"
                        class="d-inline"
                      >
                        <button type="submit" class="btn btn-danger">
                          Delete
                        </button>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </td>
          </tr>
          {% endfor %} {% else %}
          <tr>
            <td colspan="6" class="text-center">No services found</td>
          </tr>
          {% endif %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Service Features Section -->
<div class="card mt-4">
  <div class="card-header">
    <h6>Service Features</h6>
    <p class="card-subtitle mb-0 text-muted">
      Features are managed within each service
    </p>
  </div>
  <div class="card-body">
    <div class="alert alert-info">
      <i class="fas fa-info-circle"></i> Service features can be added and
      managed when editing individual services.
    </div>

    <div class="row">
      <div class="col-md-6">
        <div class="card bg-light">
          <div class="card-body">
            <h6>How to Add Features to a Service:</h6>
            <ol>
              <li>Click the <strong>Edit</strong> button next to a service</li>
              <li>
                Scroll down to the <strong>Service Features</strong> section
              </li>
              <li>Add features with icons and descriptions</li>
              <li>Save the service to update features</li>
            </ol>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card bg-light">
          <div class="card-body">
            <h6>Tips for Effective Service Features:</h6>
            <ul>
              <li>Keep feature descriptions concise and clear</li>
              <li>Use appropriate icons that represent each feature</li>
              <li>Limit to 4-6 features per service for better readability</li>
              <li>Highlight the unique aspects of your service</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- FAQ Section -->
<div class="card mt-4">
  <div class="card-header d-flex justify-content-between align-items-center">
    <h6>Frequently Asked Questions</h6>
    <button
      type="button"
      class="btn btn-sm btn-primary"
      data-bs-toggle="modal"
      data-bs-target="#addFaqModal"
    >
      <i class="fas fa-plus"></i> Add FAQ
    </button>
  </div>
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>Question</th>
            <th>Answer</th>
            <th>Order</th>
            <th width="150">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% if faqs %} {% for faq in faqs %}
          <tr>
            <td>{{ faq.question }}</td>
            <td>{{ faq.answer|truncate(100) }}</td>
            <td>{{ faq.order }}</td>
            <td class="table-actions">
              <button
                type="button"
                class="btn btn-sm btn-info"
                data-bs-toggle="modal"
                data-bs-target="#editFaqModal{{ faq.id }}"
              >
                <i class="fas fa-edit"></i> Edit
              </button>
              <button
                type="button"
                class="btn btn-sm btn-danger"
                data-bs-toggle="modal"
                data-bs-target="#deleteFaqModal{{ faq.id }}"
              >
                <i class="fas fa-trash"></i> Delete
              </button>

              <!-- Edit FAQ Modal -->
              <div
                class="modal fade"
                id="editFaqModal{{ faq.id }}"
                tabindex="-1"
                aria-labelledby="editFaqModalLabel{{ faq.id }}"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-lg">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5
                        class="modal-title"
                        id="editFaqModalLabel{{ faq.id }}"
                      >
                        Edit FAQ
                      </h5>
                      <button
                        type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close"
                      ></button>
                    </div>
                    <form
                      action="{{ url_for('admin.edit_faq', faq_id=faq.id) }}"
                      method="POST"
                    >
                      <div class="modal-body">
                        <div class="mb-3">
                          <label for="question{{ faq.id }}" class="form-label"
                            >Question</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            id="question{{ faq.id }}"
                            name="question"
                            value="{{ faq.question }}"
                            required
                          />
                        </div>
                        <div class="mb-3">
                          <label for="answer{{ faq.id }}" class="form-label"
                            >Answer</label
                          >
                          <textarea
                            class="form-control"
                            id="answer{{ faq.id }}"
                            name="answer"
                            rows="4"
                            required
                          >
{{ faq.answer }}</textarea
                          >
                        </div>
                        <div class="mb-3">
                          <label for="order{{ faq.id }}" class="form-label"
                            >Display Order</label
                          >
                          <input
                            type="number"
                            class="form-control"
                            id="order{{ faq.id }}"
                            name="order"
                            value="{{ faq.order }}"
                            min="0"
                          />
                        </div>
                      </div>
                      <div class="modal-footer">
                        <button
                          type="button"
                          class="btn btn-secondary"
                          data-bs-dismiss="modal"
                        >
                          Cancel
                        </button>
                        <button type="submit" class="btn btn-primary">
                          Update
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>

              <!-- Delete FAQ Modal -->
              <div
                class="modal fade"
                id="deleteFaqModal{{ faq.id }}"
                tabindex="-1"
                aria-labelledby="deleteFaqModalLabel{{ faq.id }}"
                aria-hidden="true"
              >
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5
                        class="modal-title"
                        id="deleteFaqModalLabel{{ faq.id }}"
                      >
                        Confirm Delete
                      </h5>
                      <button
                        type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close"
                      ></button>
                    </div>
                    <div class="modal-body">
                      Are you sure you want to delete this FAQ? This action
                      cannot be undone.
                    </div>
                    <div class="modal-footer">
                      <button
                        type="button"
                        class="btn btn-secondary"
                        data-bs-dismiss="modal"
                      >
                        Cancel
                      </button>
                      <form
                        action="{{ url_for('admin.delete_faq', faq_id=faq.id) }}"
                        method="POST"
                        class="d-inline"
                      >
                        <button type="submit" class="btn btn-danger">
                          Delete
                        </button>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </td>
          </tr>
          {% endfor %} {% else %}
          <tr>
            <td colspan="4" class="text-center">No FAQs found</td>
          </tr>
          {% endif %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Add FAQ Modal -->
<div
  class="modal fade"
  id="addFaqModal"
  tabindex="-1"
  aria-labelledby="addFaqModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addFaqModalLabel">Add New FAQ</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <form action="{{ url_for('admin.add_faq') }}" method="POST">
        <div class="modal-body">
          <div class="mb-3">
            <label for="question" class="form-label">Question</label>
            <input
              type="text"
              class="form-control"
              id="question"
              name="question"
              required
            />
          </div>
          <div class="mb-3">
            <label for="answer" class="form-label">Answer</label>
            <textarea
              class="form-control"
              id="answer"
              name="answer"
              rows="4"
              required
            ></textarea>
          </div>
          <div class="mb-3">
            <label for="order" class="form-label">Display Order</label>
            <input
              type="number"
              class="form-control"
              id="order"
              name="order"
              value="0"
              min="0"
            />
          </div>
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-secondary"
            data-bs-dismiss="modal"
          >
            Cancel
          </button>
          <button type="submit" class="btn btn-primary">Add FAQ</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
